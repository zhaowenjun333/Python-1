# 原理：通过第三方的一个机器去发送请求
import requests
import random

header = {
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',
    'Accept-Encoding': 'gzip, deflate, br',
    'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',
    'Cache-Control': 'no-cache',
    'Connection': 'keep-alive',
    'Cookie': 'BD_UPN=12314753; BIDUPSID=CD66B448A65B267623025EFC933202FD; PSTM=1646545673; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; BDUSS=GFwQ3JtaVVPUS1GdmdHNnNLNUd4eEd2RE84ak9SLXRNa0ZTSzVqTS1LYmdCMWhpSVFBQUFBJCQAAAAAAAAAAAEAAAAh9fr3wLa99cHjbHJ5MQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOB6MGLgejBiR; BDUSS_BFESS=GFwQ3JtaVVPUS1GdmdHNnNLNUd4eEd2RE84ak9SLXRNa0ZTSzVqTS1LYmdCMWhpSVFBQUFBJCQAAAAAAAAAAAEAAAAh9fr3wLa99cHjbHJ5MQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOB6MGLgejBiR; BAIDUID=91A14A7E948DF19497BBEB27C3A5D216:FG=1; MAWEBCUID=web_bKWKOqPkxePIRuAPPvkWhOKglFHgAoVHquGMUXKyWQQvHzhGdY; H_WISE_SIDS=110085_127969_179350_184716_188332_188743_189755_190625_191067_191248_192913_192958_193246_194085_194512_194519_194529_195342_196428_197241_197471_197711_197891_197958_198256_199022_199565_200993_201193_201534_201700_202652_202911_203190_203309_203360_203504_204031_204305_204778_204864_205218_205235_205383_205484_205569_206006_206682_206728_206870_206911_206928_206943_206990_207022_207212_207309_207364_207471_207541_207616_207626_207729_207768_207853_207864_207894_207999_208055_208065_208113_208162_208165_208216_208226_208268_208270_208301_208313_208344_208557_208563_208721_208771_208778_208891_209090_209140_8000080_8000133_8000142_8000161_8000163_8000168_8000178_8000181_8000186; delPer=0; BD_CK_SAM=1; PSINO=2; BDRCVFR[feWj1Vr5u3D]=I67x6TjHwwYf0; shifen[353782017477_3302]=1649752602; BD_HOME=1; Hm_lvt_aec699bb6442ba076c8981c6dc490771=1649315945,1649385879,1649644982,1649753081; shifen[311910736193_89720]=1649753097; shifen[345867139555_60482]=1649753747; H_PS_PSSID=35838_31254_36167_34584_36140_36122_36074_36125_35864_36224_26350_35870_36094_36061; H_PS_645EC=77bame9XJYqhUh%2FRO1iXuW8%2Fsm2rtwIbSHifhkdkEqV8wg4ZsDRpoMmB7AlMgzo%2Ft%2BYQ; shifen[376918809682_9121]=1649754357; BCLID=6677557560454541096; BDSFRCVID=HytOJeC62wKANHjDotwThCRAlL_TvecTH6ao0kUrRYLqWeeSBM3JEG0P5x8g0KubRh6TogKKBeOTHn0F_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF=tbADoCK2JKt3jRjd5bO2qRIJMfcKbJQKaDQ03Ru8Kb7VbIb4jMnkbfJBDl7T-q5ULmnyaT6R2pOCEJ4z5n6dylD7yajK2hbpt5bRBPcuW-bBVpoEDP6pQT8ryn_OK5OiJIrNBIQmab3vOpoNXpO1h68zBN5thURB2DkO-4bCWJ5TMl5jDh3Mb6ksDMDtqjtefnKq_DK2f-3bfTrm-trB-tCsMhOJbI62aKDsaT6xBhcqEIL4MtTTBTDeQMn7yho30arCWpv70R5nDUbSj4QoX5-QjprmK5bmJCol-CjHKh5nhMJEb67JDMP0Xqbibp3y523i5J5vQpn_hhQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xb6_0DTObjHujJ5_sMDb0WRjSbPb2KROvhjRObRLgyxomtjjzWDADopcgahntqJnJ0xQS-fCkhR3ILUkqKCOdbDnRbMorjITwhTjkQlvDQttjQUnhfIkja-5tfRbNEJ7TyURIbf47yMIj0q4Hb6b9BJcjfU5MSlcNLTjpQT8r5MDOK5OhJRLeoKDhJC-bhKvF-t7M5bOH2x7024oHbC6XBJTqajrjDnCrybrMXUI8LNDH-MnCBebBKn72bMbsEUoqhMvr3bK8-nO7ttoytI3PQfowBPjReJ5bLxF5yxL1Db0thTvMtg3t3foSJfboepvoL4oc3MkHD-jdJJQOBKQB0KnGbUQkeq8CQft20b0EeMtjKjLEK5r2SCKyJC8M3j; BCLID_BFESS=6677557560454541096; BDSFRCVID_BFESS=HytOJeC62wKANHjDotwThCRAlL_TvecTH6ao0kUrRYLqWeeSBM3JEG0P5x8g0KubRh6TogKKBeOTHn0F_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF_BFESS=tbADoCK2JKt3jRjd5bO2qRIJMfcKbJQKaDQ03Ru8Kb7VbIb4jMnkbfJBDl7T-q5ULmnyaT6R2pOCEJ4z5n6dylD7yajK2hbpt5bRBPcuW-bBVpoEDP6pQT8ryn_OK5OiJIrNBIQmab3vOpoNXpO1h68zBN5thURB2DkO-4bCWJ5TMl5jDh3Mb6ksDMDtqjtefnKq_DK2f-3bfTrm-trB-tCsMhOJbI62aKDsaT6xBhcqEIL4MtTTBTDeQMn7yho30arCWpv70R5nDUbSj4QoX5-QjprmK5bmJCol-CjHKh5nhMJEb67JDMP0Xqbibp3y523i5J5vQpn_hhQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xb6_0DTObjHujJ5_sMDb0WRjSbPb2KROvhjRObRLgyxomtjjzWDADopcgahntqJnJ0xQS-fCkhR3ILUkqKCOdbDnRbMorjITwhTjkQlvDQttjQUnhfIkja-5tfRbNEJ7TyURIbf47yMIj0q4Hb6b9BJcjfU5MSlcNLTjpQT8r5MDOK5OhJRLeoKDhJC-bhKvF-t7M5bOH2x7024oHbC6XBJTqajrjDnCrybrMXUI8LNDH-MnCBebBKn72bMbsEUoqhMvr3bK8-nO7ttoytI3PQfowBPjReJ5bLxF5yxL1Db0thTvMtg3t3foSJfboepvoL4oc3MkHD-jdJJQOBKQB0KnGbUQkeq8CQft20b0EeMtjKjLEK5r2SCKyJC8M3j; Hm_lpvt_aec699bb6442ba076c8981c6dc490771=1649754361; BAIDUID_BFESS=6E01B839C112D7511F687498B7D065AB:FG=1; COOKIE_SESSION=3_4_5_9_3_16_1_0_5_8_6_1_713_610_175_2_1649754530_1649754357_1649754355%7C9%231276_209_1649754355%7C9; sugstore=1; BA_HECTOR=052ha00424212g00m11h5agh50r',
    'Host': 'www.baidu.com',
    'Pragma': 'no-cache',
    'Referer': 'https://www.baidu.com/s?wd=Python%E7%88%AC%E8%99%AB%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86IP&rsv_spt=1&rsv_iqid=0x98c38a3b000d8ccf&issp=1&f=8&rsv_bp=1&rsv_idx=2&ie=utf-8&tn=baiduhome_pg&rsv_enter=1&rsv_dl=tb&rsv_sug3=30&rsv_sug1=18&rsv_sug7=101&rsv_t=92e5DfZbmgQk1UMN5E2SaUFgNRn%2FPlcF%2FpREE9NSXusQERCIVfbV9ozrHLDMBJkZcVLm&rsv_sug2=0&rsv_btype=i&inputT=11172&rsv_sug4=13097',
    'sec-ch-ua': '" Not A;Brand";v="99", "Chromium";v="100", "Google Chrome";v="100"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'Sec-Fetch-Dest': 'document',
    'Sec-Fetch-Mode': 'navigate',
    'Sec-Fetch-Site': 'same-origin',
    'Sec-Fetch-User': '?1',
    'Upgrade-Insecure-Requests': '1',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36'
}

ips = ['123.163.67.50:8118', '58.56.149.198:53281', '14.115.186.161:8118']

for ip in ips:
    try:
        proxies = {
            "http": f'http://{ip}',
            "https": f'https://{ip}',
        }
        resp = requests.get("https://www.baidu.com", headers=header, proxies=proxies)
        resp.encoding = 'utf-8'
        print(f"ip:{ip}")
        print(resp.status_code, '\n')
        resp.close()
    except Exception as e:
        print('出现异常', e)

